{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Fè Piblisite W</h2>
    
    <form method="POST" enctype="multipart/form-data" class="ad-form">
        <div class="form-group">
            <label for="whatsapp">Nimewo WhatsApp ou *</label>
            <input type="tel" id="whatsapp" name="whatsapp" required
                   placeholder="Egzamp: +50912345678" oninput="formatWhatsAppNumber(this)">
        </div>

        <div class="form-group">
            <label>Chwazi Tip Medya *</label>
            <div class="media-type-selector">
                <label class="media-option">
                    <input type="radio" name="media_type" value="images" checked>
                    <span>3 Imaj</span>
                </label>
                <label class="media-option">
                    <input type="radio" name="media_type" value="video">
                    <span>1 Videyo (maks 30 segonn, 100MB)</span>
                </label>
            </div>
        </div>

        <div class="form-group" id="images-section">
            <label>3 Imaj Piblisite w *</label>
            <div class="image-upload-grid">
                <div class="upload-box">
                    <input type="file" name="image_1" accept="image/*" required>
                    <span>Imaj 1</span>
                </div>
                <div class="upload-box">
                    <input type="file" name="image_2" accept="image/*" required>
                    <span>Imaj 2</span>
                </div>
                <div class="upload-box">
                    <input type="file" name="image_3" accept="image/*" required>
                    <span>Imaj 3</span>
                </div>
            </div>
        </div>

        <div class="form-group" id="video-section" style="display: none;">
            <label>Videyo Piblisite w (maks 30 segonn, 100MB) *</label>
            <div class="upload-box" style="position: relative;">
                <input type="file" name="video" accept="video/mp4,video/avi,video/mov,video/mkv" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;">
                <span>Klike pou chwazi videyo</span>
            </div>
            <small>Videyo dwe gen maksimòm 30 segonn ak 100MB. Tip aksepte: MP4, AVI, MOV, MKV.</small>
        </div>

        <div class="form-group">
            <label for="title">Tit Piblisite *</label>
            <input type="text" id="title" name="title" required
                   maxlength="100" placeholder="Ekri yon tit atraktif pou piblisite w la...">
            <small>Maksimòm 100 karaktè</small>
        </div>

        <div class="form-group">
            <label>Chwazi Tip Piblisite *</label>
            <div class="ad-type-selector">
                <label class="ad-option">
                    <input type="radio" name="ad_type" value="publish" checked>
                    <span>PUBLISH ONLY</span>
                </label>
                <label class="ad-option">
                    <input type="radio" name="ad_type" value="sell">
                    <span>SELL</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label for="description">Deskripsyon Kout *</label>
            <textarea id="description" name="description" required
                      maxlength="300" placeholder="Ekri yon deskripsyon kout sou sa w ap vann oswa ofri..."></textarea>
            <small>Maksimòm 300 karaktè</small>
        </div>

        <div class="form-group" id="price-section">
            <label for="price_gourdes">Pri an Gourdes (HTG) *</label>
            <input type="number" id="price_gourdes" name="price_gourdes" required min="0.01" step="0.01"
                   placeholder="Egzamp: 5000.00">
            <small>Pri an Gourdes pou piblisite sa a. Pri an Gkach pral kalkile otomatikman.</small>
            <div id="gkach-equivalent" class="gkach-info" style="display: block;">
                <small>Egivalan: <span id="gkach-price">0</span> Gkach</small>
            </div>
        </div>

        <input type="hidden" id="price_gkach" name="price_gkach" value="0">

        <div class="form-group">
            <div class="terms-checkbox">
                <input type="checkbox" id="accept_terms" name="accept_terms" required>
                <label for="accept_terms">Mwen li epi mwen aksepte <a href="#" onclick="showTermsModal()">Kondisyon ak Règleman</a> pou soumisyon piblisite ak itilizasyon Gkach</label>
            </div>
        </div>

        <button type="submit" class="btn btn-gold">Soumèt Piblisite</button>
    </form>
</div>

<style>
.ad-type-selector {
    display: flex;
    gap: 20px;
}

.ad-option {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

.ad-option input[type="radio"] {
    margin: 0;
}

.ad-option span {
    font-weight: bold;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const adTypeRadios = document.querySelectorAll('input[name="ad_type"]');
    const priceSection = document.getElementById('price-section');
    const priceInput = document.getElementById('price_gourdes');

    function togglePriceSection() {
        const selectedAdType = document.querySelector('input[name="ad_type"]:checked').value;
        if (selectedAdType === 'publish') {
            priceSection.style.display = 'none';
            priceInput.required = false;
            priceInput.value = '';
            document.getElementById('price_gkach').value = '0';
            document.getElementById('gkach-price').textContent = '0';
        } else {
            priceSection.style.display = 'block';
            priceInput.required = true;
        }
    }

    adTypeRadios.forEach(radio => {
        radio.addEventListener('change', togglePriceSection);
    });

    // Initial check
    togglePriceSection();
});
</script>

{% endblock %}
